<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="ppt_/animate.min.css">
<link rel="stylesheet" href="ppt_/ppt.css">
<div><section><div><h1 id="gulp-eol-bug-">gulp-eol bug修复之总结</h1><p><em>2014-09-06</em></p></div></section><section><div><h2 id="-">背景</h2><p><a href="https://github.com/fritx/gulp-eol">gulp-eol</a>是我之前写的一个gulp插件，主要用于统一文件的换行符。</p><p>今早打开github，发现一俄国人跑来我这开<a href="https://github.com/fritx/gulp-eol/issues/1">issue</a>，说是复制/转移文件时，插件失效了，还贴出了他的gulpfile。</p><p><img width="260" src="bug/notification.png"></p><p>下午happy完回来，发现是自己程序的bug，修复后发布，并告知事主<a href="https://github.com/truetamtam">@truetamtam</a>确认，tam很快说问题解决了，皆大欢喜。</p></div></section><section><div><h2 id="-">我想说</h2><p>凡事都应<strong>以小见大</strong>，这样才能进步成长。我列出了7点，不多。</p></div></section><section><div><h3 id="1-">1. 粗心大意</h3><p>此bug乃低级错误：</p><pre><code class="lang-js">str = str.replace(/\r?\n/g, eol);
if (append &amp;&amp; !(
  new RegExp(eol + '$').test(str))
  ) {
  // this statement should be always executed
  // but not remained here
  file.contents = new Buffer(str + eol);
}
</code></pre><p>我错将一个关键的赋值逻辑放入了<code>if(){}</code>中，加之测试覆盖不全，导致bug埋藏许久。</p></div></section><section><div><h3 id="2-">2. 心存感激</h3><p>整个issue下来，共6次发言，我和tam各3次。我们的发言基本上都带有感谢或友好。虽然这大多时候只是一种礼节，但我相信大家都是一样，发自内心地享受友爱和互助。</p><p>我甚至在<a href="https://github.com/fritx/gulp-eol/commit/86018672a37cfaa49ebb7f7c20bf9136b0add43a">代码更新</a>中“慷慨激昂”地道谢：</p><p><img width="380" src="bug/thanks.png"></p></div></section><section><div><h3 id="3-">3. 明于展示</h3><blockquote>
<p>Talk is cheap, show me the code!</p>
</blockquote><p>相信大家都知道这句it界的名言，口说无凭，很多时候我们需要用代码、用实例来说明问题。在这一点上，我和tam都是做的不错的：</p><ul>
<li>问题提出时，他贴上了gulpfile，便于我对环境的了解</li>
<li>bug初步确定时，我给出了简短的源码注解（同1.），表达了自己的判断</li>
</ul></div></section><section><div><h3 id="4-">4. 巧于引用</h3><p><img width="320" src="bug/reference.png"></p><p>bug修复后，在提交描述中提及issue的编号，如"#1"，issue页会及时地追加一条标签。虽然这只是github一个简单的功能，但它发挥着关键作用：</p><ul>
<li>通知：及时明确地展示提交描述</li>
<li>关联：精确链接到具体的代码改动</li>
<li>简明：就具体的代码改动，你已无需额外发言阐述</li>
</ul><p>另外，我用了"for #1"，而不是"fix #1"。因为此bug与事主的实例并无绝对联系，当时只是初步判定，用"for"可以在引用issue的同时，不close掉它。</p></div></section><section><div><h3 id="5-">5. 堪称典范</h3><blockquote>
<p>整个issue下来，共6次发言，我和tam各3次</p>
</blockquote><p>是的，加上3次操作，共9步，让我们来回顾一下：</p><ol>
<li>tam：提出问题，贴出实例</li>
<li>我：表示迟点回应，感谢</li>
<li>我：（发现有bug，贴上bug标签）</li>
<li>我：表示已有初步判定，贴出注解，预告更新，感谢</li>
<li>tam：酷，感谢</li>
<li>我：（提交更新，引用issue）</li>
<li>我：告知已发布，要求确认</li>
<li>tam：表示确认，感谢</li>
<li>tam：（关闭issue）</li>
</ol><p><img width="260" src="bug/close.png"></p><p>别看这区区小issue，它包括了扼要的表达、精准的操作，包括了：</p><ol>
<li>提出议题，描述问题</li>
<li>初步回应</li>
<li>问题分类确定</li>
<li>症结确定和描述</li>
<li>预告更新</li>
<li>更新提交和描述</li>
<li>更新告知，要求确认</li>
<li>问题解决确认</li>
<li>关闭议题</li>
</ol><p>这简直就是issue的标杆、模板与典范。感谢tam的配合。</p></div></section><section><div><h3 id="6-">6. 猜想成立</h3><p>之前接触grunt/gulp这批新兴的构建工具，见识了琳琅满目的插件，加之web开发者的冲劲有目共睹，有了以下猜想：</p><ul>
<li>复制/编译/压缩/测试，还有什么gulp不能做？</li>
<li>gulp能做很多，将存在不少未开发甚至未知的插件</li>
<li>发现并开发出来，有类似需求的人会主动来前来使用</li>
</ul><p>短短几行代码，gulp-eol写好发布，未作任何推广，自己没用几次，几个月后竟有人“自投罗网”。事实证明，我的猜想是对的。</p><p><img width="500" src="bug/gulp-plugins.png"></p></div></section><section><div><h3 id="7-github">7. 关于github</h3><p>在同学之中，<a href="https://github.com/fritx">我在github</a>上的活跃度和“功绩”应属最佳。这得益于web开发者（尤其是web前端）一贯的开源氛围。</p><p>以前是我找老外，提issue，现在也逐渐变成了他们找我。非常享受跟他们一起交流学习。当然，与国人、同学也是一样。</p><p>github能给你以“虚荣”：</p><ul>
<li>“嘿，npm排行第2的aysnc库，我可是<a href="https://github.com/caolan/async/graphs/contributors">top6/89</a>的贡献者。”</li>
<li>“用过zepto？” “不但用过，还参与开发，<a href="https://github.com/madrobby/zepto/graphs/contributors">top68/151</a>。”</li>
</ul><p>github虽不是全部，但也是一种角度。据我所知，不少it公司，包括我们公司，都非常重视应聘者的github。多点使用github，尽可能开采它的功能吧。Just for fun!</p></div></section><section><div><h2 id="-">结语</h2><p>想提升<strong>吹牛技艺</strong>的可以联系本人。</p><p>注意，全文并未提及“装B”二字。</p></div></section></div>
<script src="ppt_/jquery.min.js"></script>
<script src="ppt_/ppt.js"></script>